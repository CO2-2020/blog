(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{330:function(s,t){s.exports="data:image/png;base64,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"},331:function(s,t,n){s.exports=n.p+"assets/img/dom-diff2.dbdd54b6.jpg"},332:function(s,t,n){s.exports=n.p+"assets/img/vue2-dom-diff.e6ee7e1e.gif"},333:function(s,t,n){s.exports=n.p+"assets/img/vue3-dom-diff.55e5bd94.gif"},383:function(s,t,n){"use strict";n.r(t);var a=n(33),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"vue2-x和vue3-x渲染器的diff算法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue2-x和vue3-x渲染器的diff算法"}},[s._v("#")]),s._v(" Vue2.x和Vue3.x渲染器的diff算法")]),s._v(" "),a("h2",{attrs:{id:"dom-diff概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dom-diff概述"}},[s._v("#")]),s._v(" dom-diff概述")]),s._v(" "),a("p",[a("strong",[s._v("比较只会在同层级进行, 不会跨层级比较")]),s._v(" "),a("img",{attrs:{src:n(330),alt:"dom-diff1"}})]),s._v(" "),a("h2",{attrs:{id:"vue2-x-diff算法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue2-x-diff算法"}},[s._v("#")]),s._v(" Vue2.x diff算法")]),s._v(" "),a("h3",{attrs:{id:"_1-vue2-x-dom-diff算法核心源码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-vue2-x-dom-diff算法核心源码"}},[s._v("#")]),s._v(" 1.vue2.x dom-diff算法核心源码")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("updateChildren")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("parentElm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" oldCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" insertedVnodeQueue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" removeOnly")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" oldStartIdx "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//旧节点开始index")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" newStartIdx "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//新节点开始index")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" oldEndIdx "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" oldCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//旧节点结束index")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" oldStartVnode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" oldCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//旧节点开始节点VNode")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" oldEndVnode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" oldCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("oldEndIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//旧节点结束节点")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" newEndIdx "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" newCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//新节点结束index")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" newStartVnode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" newCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//新节点开始节点VNode")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" newEndVnode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" newCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("newEndIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//新节点结束虚拟节点VNode")]),s._v("\n\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//核心dom-diff 算法")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//新旧节点两个指针，做比较")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("oldStartIdx "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" oldEndIdx "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" newStartIdx "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" newEndIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//1.旧开始节点 === undefined")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("isUndef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("oldStartVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          oldStartVnode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" oldCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v("oldStartIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//2.旧结束节点 === undefined")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("isUndef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("oldEndVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          oldEndVnode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" oldCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("oldEndIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//3.旧开始节点 === 新开始节点")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sameVnode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("oldStartVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newStartVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("patchVnode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("oldStartVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newStartVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" insertedVnodeQueue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newStartIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n          oldStartVnode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" oldCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v("oldStartIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n          newStartVnode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" newCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v("newStartIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n          \n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//4.旧结束节点 === 新结束节点")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sameVnode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("oldEndVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newEndVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("patchVnode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("oldEndVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newEndVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" insertedVnodeQueue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newEndIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n          oldEndVnode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" oldCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("oldEndIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n          newEndVnode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" newCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("newEndIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n          \n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//5.旧开始节点 === 新结束节点")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sameVnode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("oldStartVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newEndVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n          "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("patchVnode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("oldStartVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newEndVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" insertedVnodeQueue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newEndIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//操作真实dom:将老开始节点放置在老结束节点的后面,占了老节点的结束节点位置")]),s._v("\n          canMove "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" nodeOps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("insertBefore")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("parentElm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" oldStartVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("elm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" nodeOps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nextSibling")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("oldEndVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("elm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n          oldStartVnode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" oldCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v("oldStartIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n          newEndVnode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" newCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("newEndIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n          \n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//6.旧结束节点 === 新开始节点")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sameVnode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("oldEndVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newStartVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n          "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("patchVnode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("oldEndVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newStartVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" insertedVnodeQueue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newStartIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n         \n          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//操作真实dom：将结束节点放置在开始节点前面，因为这里指针有移动，作用就是原本的位置")]),s._v("\n          canMove "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" nodeOps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("insertBefore")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("parentElm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" oldEndVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("elm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" oldStartVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("elm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n          oldEndVnode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" oldCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("oldEndIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n          newStartVnode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" newCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v("newStartIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n          \n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//7.都不是")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("isUndef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("oldKeyToIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//返回老节点的key-index的映射表")]),s._v("\n            oldKeyToIdx "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("createKeyToOldIdx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("oldCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" oldStartIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" oldEndIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n          idxInOld "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("isDef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("newStartVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" oldKeyToIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("newStartVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("findIdxInOld")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("newStartVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" oldCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" oldStartIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" oldEndIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//index不存在，就是新增的元素")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("isUndef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("idxInOld"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n            \n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//实操dom：新增VNode,并且添加到dom中")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("createElm")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("newStartVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" insertedVnodeQueue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parentElm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" oldStartVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("elm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newStartIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//不是新增元素，则移动")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//需要移动的VNode")]),s._v("\n            vnodeToMove "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" oldCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("idxInOld"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//比较需要移动的VNode和现在新开始节点是否相同")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sameVnode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("vnodeToMove"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newStartVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n              "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//打补丁，以及遍历子节点")]),s._v("\n              "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("patchVnode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("vnodeToMove"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newStartVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" insertedVnodeQueue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newStartIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n              "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//将老虚拟dom此处的VNode删除")]),s._v("\n              oldCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("idxInOld"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("undefined")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n           \t "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//实操dom")]),s._v("\n              canMove "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" nodeOps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("insertBefore")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("parentElm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" vnodeToMove"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("elm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" oldStartVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("elm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n              "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("createElm")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("newStartVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" insertedVnodeQueue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parentElm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" oldStartVnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("elm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newStartIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          newStartVnode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" newCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v("newStartIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*\n        1.如果开始下标大于结束下标，说明遍历老节点遍历结束\n        2.老节点遍历完毕，新节点的下标+1的值，添加进去\n        3.如果新节点遍历完了，就删除老节点中开始到结束下标的值\n      */")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("oldStartIdx "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" oldEndIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        refElm "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("isUndef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("newCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("newEndIdx "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" newCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("newEndIdx "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("elm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("addVnodes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("parentElm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" refElm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newStartIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newEndIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" insertedVnodeQueue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("newStartIdx "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" newEndIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//老的没有遍历完，新的遍历完了")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//删除老的的节点，从start开始，end结束，包括end")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//这里原先移动了节点，用undefined占位，直接删除不影响任何节点")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("removeVnodes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("oldCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" oldStartIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" oldEndIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br")])]),a("h3",{attrs:{id:"_2-整体逻辑图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-整体逻辑图"}},[s._v("#")]),s._v(" 2. 整体逻辑图")]),s._v(" "),a("p",[a("img",{attrs:{src:n(331),alt:"dom-diff2"}})]),s._v(" "),a("h3",{attrs:{id:"_3-案例分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-案例分析"}},[s._v("#")]),s._v(" 3.案例分析")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[s._v("realDom\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//old VNode")]),s._v("\nl                           r\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//new VNode")]),s._v("\na                             b\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("**\n"),a("strong",[s._v("注意这里比较的都是虚拟dom节点：真实dom的移动不影响虚拟dom节点值，可参照动图一起看")])]),s._v(" "),a("p",[a("img",{attrs:{src:n(332),alt:"vue2-dom-diff"}})]),s._v(" "),a("ol",[a("li",[s._v("新旧头比较，直到第一个不相同的节点： "),a("code",[s._v("l")]),s._v(" 和 "),a("code",[s._v("a")]),s._v(" 都向右移动一位 ，都为1")]),s._v(" "),a("li",[s._v("新旧尾比较，直到第一个不相同的节点： "),a("code",[s._v("r")]),s._v(" 和 "),a("code",[s._v("b")]),s._v(" 都向左移动一位，都为9")]),s._v(" "),a("li",[s._v("旧头和新尾比较，相同的话，开始移动真实的dom：\n"),a("ul",[a("li",[s._v("**旧头真实dom移动到旧尾紧跟其后的兄弟节点的前面：**"),a("strong",[s._v("真实dom中，2移动到10前面，原生节点插入方式实现")])]),s._v(" "),a("li",[s._v("指针移动：旧开始指针向右移动一位，新结束指针向左移动一位 此时， "),a("code",[s._v("l")]),s._v(" 变成了2， "),a("code",[s._v("b")]),s._v("  变成了8")]),s._v(" "),a("li",[s._v("此时的真实dom为： "),a("code",[s._v("1 3 4 5 6 7 8 9 2 10")])])])]),s._v(" "),a("li",[s._v("旧尾和新头比较，相同的话，移动真实dom：\n"),a("ul",[a("li",[a("strong",[s._v("旧尾真实dom移动到旧头节点的el的前面：真实dom中，9移动到3的前面")])]),s._v(" "),a("li",[s._v("旧尾指针向左移动一位，新头指针向右移动一位，此时， "),a("code",[s._v("a")]),s._v(" 变成了2，  "),a("code",[s._v("r")]),s._v(" 变成了8")]),s._v(" "),a("li",[s._v("此时的真实dom为： "),a("code",[s._v("1 9 3 4 5 6 7 8 2 10")])])])]),s._v(" "),a("li",[s._v("此时四个指针已经不满足上面四种情况了，就需要进一步处理\n"),a("ol",[a("li",[s._v("首先"),a("strong",[s._v("遍历剩余老节点")]),s._v("，返回一个 "),a("code",[s._v("key:oldIndex")]),s._v(" 映射表")]),s._v(" "),a("li",[s._v("新节点的开始节点在这个映射表中能找到对应的oldIndex，说明在老节点中存在这个节点，只需要移动即可")]),s._v(" "),a("li",[s._v("如果不存在，则需要新建节点，并且插入到指定的位置")])])])]),s._v(" "),a("p",[s._v("接着分析案例：")]),s._v(" "),a("ul",[a("li",[s._v("剩下的老节点为： "),a("code",[s._v("[3, 4, 5, 6, 7, 8]")]),s._v("  映射表为 "),a("code",[s._v("{3: 2, 4: 3, 5: 4, 6: 5, 7: 6, 8: 7}")]),s._v(" \n剩下的新节点的为 "),a("code",[s._v("[11, 7, 3, 4, 5, 6]")]),s._v("  此时 "),a("code",[s._v("11")]),s._v(" 在映射表中，没有查询到，说明是新增的节点")]),s._v(" "),a("li",[s._v("新增节点  "),a("code",[s._v("11")]),s._v("  ，通过 "),a("code",[s._v("createElm")]),s._v(" 函数创建真实dom，并且插入到旧开始节点el指向的真实dom前面。此时旧开始节点是 "),a("code",[s._v("3")]),s._v(" ,真实dom中 "),a("code",[s._v("11")]),s._v(" 插入到 "),a("code",[s._v("3")]),s._v(" 的前面。")]),s._v(" "),a("li",[s._v("新开始指针向右移动一位， "),a("code",[s._v("a")]),s._v(" 变成3")]),s._v(" "),a("li",[s._v("此时的真实dom :"),a("code",[s._v("1 9 11 3 4 5 6 7 8 2 10")])])]),s._v(" "),a("ol",{attrs:{start:"6"}},[a("li",[s._v("接着分析：此时老节点剩余 "),a("code",[s._v("3,4,5,6,7,8")]),s._v(" 新节点剩余 "),a("code",[s._v("7,3,4,5,6")]),s._v(" 此时又符合情况五。\n"),a("ul",[a("li",[s._v("先找到 "),a("code",[s._v("7")]),s._v(" 在老节点的 "),a("code",[s._v("index")]),s._v(" ,根据映射表， "),a("code",[s._v("oldIndex")]),s._v(" 为 "),a("code",[s._v("6")]),s._v(" 说明在老节点中存在，只需要移动")]),s._v(" "),a("li",[s._v("将 "),a("code",[s._v("7")]),s._v(" 真实dom中的el移动到老开始节点的el前面，也就是真实dom中3的前面")]),s._v(" "),a("li",[s._v("将老节点中 "),a("code",[s._v("oldIndex")]),s._v(" 这个节点设置为 "),a("code",[s._v("undefined")]),s._v(" ，后面会讲作用")]),s._v(" "),a("li",[s._v("新开始指针向右移动一位， "),a("code",[s._v("a")]),s._v(" 变成了4")]),s._v(" "),a("li",[s._v("此时的真实dom :"),a("code",[s._v("1 9 11 7 3 4 5 6 8 2 10")])])])]),s._v(" "),a("li",[s._v("此时老节点剩余 "),a("code",[s._v("3,4,5,6,7,8")]),s._v(" 新节点剩余 "),a("code",[s._v("3,4,5,6")]),s._v(" 此时符合情况一，头头比较，遍历完新节点，循环结束")]),s._v(" "),a("li",[s._v("接下来是循环结束后的处理，也就是查看新旧节点是否都完全遍历\n"),a("ol",[a("li",[s._v("此时旧节点还未完全遍历，剩下 "),a("code",[s._v("7,8")]),s._v(" ,说明这是需要删除的节点")]),s._v(" "),a("li",[s._v("因为 "),a("code",[s._v("7")]),s._v(" 是被移动的节点，在移动之后，将其虚拟节点数组中的位置设置成了 "),a("code",[s._v("undefined")]),s._v(" 避免了后续将其删除")]),s._v(" "),a("li",[s._v("根据 "),a("code",[s._v("8")]),s._v(" 虚拟节点的elm属性，将其真实dom中的el删除")])])])]),s._v(" "),a("p",[s._v("总结：整个Vue2.x的dom-diff过程就完成了，需要注意的几点是，")]),s._v(" "),a("ol",[a("li",[s._v("双指针遍历的是，新旧的虚拟节点数组，不是真实dom")]),s._v(" "),a("li",[s._v("老节点都有elm属性，指向真实的节点，节点的插入和删除都是依靠这个属性")]),s._v(" "),a("li",[s._v("Vue2.x尽可能在复用原本的dom")]),s._v(" "),a("li",[s._v("尽量使用key，在不使用key时，所有的节点对比都是相同的，对比情况都是走的头头比较，节点都是直接对比然后进行修改处理，比复用移动老节点效率低。")])]),s._v(" "),a("h2",{attrs:{id:"vue3-x-diff算法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue3-x-diff算法"}},[s._v("#")]),s._v(" Vue3.x diff算法")]),s._v(" "),a("h3",{attrs:{id:"_1-vue3-x-dom-diff-核心源码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-vue3-x-dom-diff-核心源码"}},[s._v("#")]),s._v(" 1. Vue3.x dom-diff 核心源码")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("patchKeyedChildren")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("c1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" container"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parentAnchor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parentComponent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parentSuspense"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" isSVG"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" optimized")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" l2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" c2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" e1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" c1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// prev ending index")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" e2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" l2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// next ending index")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. sync from start")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// (a b) c")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// (a b) d e")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" e1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" e2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" n1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" c1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" n2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" optimized\n                "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cloneIfMounted")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("normalizeVNode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("isSameVNodeType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("n1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" n2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("patch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("n1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" n2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" container"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parentAnchor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parentComponent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parentSuspense"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" isSVG"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" optimized"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("break")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            i"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. sync from end")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// a (b c)")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// d e (b c)")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" e1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" e2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//获取末尾的值")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" n1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" c1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("e1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" n2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("e2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" optimized\n                "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cloneIfMounted")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("e2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("normalizeVNode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("e2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("isSameVNodeType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("n1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" n2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("patch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("n1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" n2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" container"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parentAnchor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parentComponent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parentSuspense"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" isSVG"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" optimized"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("break")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            e1"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            e2"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. common sequence + mount")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// (a b)")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// (a b) c")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// i = 2, e1 = 1, e2 = 2")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// (a b)")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// c (a b)")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// i = 0, e1 = -1, e2 = 0")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//旧节点遍历完全，patch c2剩下的节点")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" e1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" e2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" nextPos "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" e2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" anchor "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" nextPos "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" l2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" c2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("nextPos"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("el "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" parentAnchor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" e2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("patch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" optimized\n                        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cloneIfMounted")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("normalizeVNode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" container"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" anchor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parentComponent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parentSuspense"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" isSVG"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                    i"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 4. common sequence + unmount")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// (a b) c")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// (a b)")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// i = 2, e1 = 2, e2 = 1")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// a (b c)")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// (b c)")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// i = 0, e1 = 0, e2 = -1")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//新节点遍历完全，卸载老节点上的多余节点")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" e2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" e1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("unmount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parentComponent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parentSuspense"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                i"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 5. unknown sequence")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// [i ... e1 + 1]: a b [c d e] f g")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// [i ... e2 + 1]: a b [e d c h] f g")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// i = 2, e1 = 4, e2 = 5")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" s1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// prev starting index")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" s2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// next starting index")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 5.1 build key:index map for newChildren")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" keyToNewIndexMap "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" s2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" e2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" nextChild "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" optimized\n                    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cloneIfMounted")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("normalizeVNode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("nextChild"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'production'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" keyToNewIndexMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("has")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("nextChild"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("warn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("Duplicate keys found during update:")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("nextChild"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("Make sure keys are unique.")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                    keyToNewIndexMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("nextChild"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 5.2 loop through old children left to be patched and try to patch")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// matching nodes & remove nodes that are no longer present")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" j"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" patched "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" toBePatched "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" e2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" s2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" moved "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" maxNewIndexSoFar "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// used to track whether any node has moved")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// works as Map<newIndex, oldIndex>")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Note that oldIndex is offset by +1")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// and oldIndex = 0 is a special value indicating the new node has")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// no corresponding old node.")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// used for determining longest stable subsequence")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" newIndexToOldIndexMap "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Array")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("toBePatched"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" toBePatched"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                newIndexToOldIndexMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//先遍历老节点")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" s1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" e1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//老的子节点")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" prevChild "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" c1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//挂载完成，删除当前老的子节点")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("patched "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" toBePatched"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("unmount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("prevChild"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parentComponent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parentSuspense"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("continue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//获取newIndex")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" newIndex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("prevChild"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    newIndex "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" keyToNewIndexMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("prevChild"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// key-less node, try to locate a key-less node of the same type")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//没有key的节点，尝试去定位一个与其相同类型的节点")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//遍历新节点")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("j "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" s2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" j "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" e2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" j"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//遍历s2到e2，找出和prevChild类型相同的节点，并将j赋值给newIndex")]),s._v("\n                        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("newIndexToOldIndexMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("j "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" s2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("isSameVNodeType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("prevChild"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("j"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                            newIndex "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" j"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("break")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//newIndex不存在，则卸载节点")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("newIndex "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("undefined")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("unmount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("prevChild"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parentComponent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parentSuspense"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//新节点存在")]),s._v("\n                    newIndexToOldIndexMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("newIndex "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" s2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//i为s1")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("newIndex "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" maxNewIndexSoFar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        maxNewIndexSoFar "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" newIndex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        moved "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("patch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("prevChild"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("newIndex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" container"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parentComponent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parentSuspense"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" isSVG"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" optimized"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                    patched"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 5.3 move and mount")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// generate longest stable subsequence only when nodes have moved")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//新节点数组中最大升序子集，返回的是index集合")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" increasingNewIndexSequence "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" moved\n                "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSequence")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("newIndexToOldIndexMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EMPTY_ARR")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            j "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" increasingNewIndexSequence"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//向后循环，以便我们可以使用最后一个补丁节点作为锚")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" toBePatched "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//新的子节点下标和新的子节点")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" nextIndex "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" s2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" nextChild "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" c2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("nextIndex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//nextIndex后面一个节点为锚点")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" anchor "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" nextIndex "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" l2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" c2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("nextIndex "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("el "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" parentAnchor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//为0则是新增")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("newIndexToOldIndexMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 挂载新节点")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("patch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" nextChild"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" container"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" anchor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parentComponent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parentSuspense"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" isSVG"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("moved"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//在没有稳定升序子集的的情况，或者现在的节点不在稳定升序子集里面，则移动")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//i是遍历需要移动节点集合的指针，从后往前 ")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//j是从后往前遍历increasingNewIndexSequence的指针")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// j<0则最长升序子集遍历完成 i!== 子序列中的值，说明需要移动")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("j "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!==")]),s._v(" increasingNewIndexSequence"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("j"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("move")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("nextChild"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" container"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" anchor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* REORDER */")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        j"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br"),a("span",{staticClass:"line-number"},[s._v("123")]),a("br"),a("span",{staticClass:"line-number"},[s._v("124")]),a("br"),a("span",{staticClass:"line-number"},[s._v("125")]),a("br"),a("span",{staticClass:"line-number"},[s._v("126")]),a("br"),a("span",{staticClass:"line-number"},[s._v("127")]),a("br"),a("span",{staticClass:"line-number"},[s._v("128")]),a("br"),a("span",{staticClass:"line-number"},[s._v("129")]),a("br"),a("span",{staticClass:"line-number"},[s._v("130")]),a("br"),a("span",{staticClass:"line-number"},[s._v("131")]),a("br"),a("span",{staticClass:"line-number"},[s._v("132")]),a("br"),a("span",{staticClass:"line-number"},[s._v("133")]),a("br"),a("span",{staticClass:"line-number"},[s._v("134")]),a("br"),a("span",{staticClass:"line-number"},[s._v("135")]),a("br"),a("span",{staticClass:"line-number"},[s._v("136")]),a("br"),a("span",{staticClass:"line-number"},[s._v("137")]),a("br"),a("span",{staticClass:"line-number"},[s._v("138")]),a("br"),a("span",{staticClass:"line-number"},[s._v("139")]),a("br"),a("span",{staticClass:"line-number"},[s._v("140")]),a("br"),a("span",{staticClass:"line-number"},[s._v("141")]),a("br"),a("span",{staticClass:"line-number"},[s._v("142")]),a("br"),a("span",{staticClass:"line-number"},[s._v("143")]),a("br"),a("span",{staticClass:"line-number"},[s._v("144")]),a("br"),a("span",{staticClass:"line-number"},[s._v("145")]),a("br"),a("span",{staticClass:"line-number"},[s._v("146")]),a("br"),a("span",{staticClass:"line-number"},[s._v("147")]),a("br"),a("span",{staticClass:"line-number"},[s._v("148")]),a("br"),a("span",{staticClass:"line-number"},[s._v("149")]),a("br"),a("span",{staticClass:"line-number"},[s._v("150")]),a("br"),a("span",{staticClass:"line-number"},[s._v("151")]),a("br"),a("span",{staticClass:"line-number"},[s._v("152")]),a("br"),a("span",{staticClass:"line-number"},[s._v("153")]),a("br"),a("span",{staticClass:"line-number"},[s._v("154")]),a("br"),a("span",{staticClass:"line-number"},[s._v("155")]),a("br"),a("span",{staticClass:"line-number"},[s._v("156")]),a("br"),a("span",{staticClass:"line-number"},[s._v("157")]),a("br"),a("span",{staticClass:"line-number"},[s._v("158")]),a("br"),a("span",{staticClass:"line-number"},[s._v("159")]),a("br"),a("span",{staticClass:"line-number"},[s._v("160")]),a("br"),a("span",{staticClass:"line-number"},[s._v("161")]),a("br"),a("span",{staticClass:"line-number"},[s._v("162")]),a("br"),a("span",{staticClass:"line-number"},[s._v("163")]),a("br"),a("span",{staticClass:"line-number"},[s._v("164")]),a("br"),a("span",{staticClass:"line-number"},[s._v("165")]),a("br"),a("span",{staticClass:"line-number"},[s._v("166")]),a("br"),a("span",{staticClass:"line-number"},[s._v("167")]),a("br"),a("span",{staticClass:"line-number"},[s._v("168")]),a("br"),a("span",{staticClass:"line-number"},[s._v("169")]),a("br"),a("span",{staticClass:"line-number"},[s._v("170")]),a("br"),a("span",{staticClass:"line-number"},[s._v("171")]),a("br"),a("span",{staticClass:"line-number"},[s._v("172")]),a("br"),a("span",{staticClass:"line-number"},[s._v("173")]),a("br"),a("span",{staticClass:"line-number"},[s._v("174")]),a("br"),a("span",{staticClass:"line-number"},[s._v("175")]),a("br"),a("span",{staticClass:"line-number"},[s._v("176")]),a("br"),a("span",{staticClass:"line-number"},[s._v("177")]),a("br"),a("span",{staticClass:"line-number"},[s._v("178")]),a("br"),a("span",{staticClass:"line-number"},[s._v("179")]),a("br"),a("span",{staticClass:"line-number"},[s._v("180")]),a("br"),a("span",{staticClass:"line-number"},[s._v("181")]),a("br"),a("span",{staticClass:"line-number"},[s._v("182")]),a("br"),a("span",{staticClass:"line-number"},[s._v("183")]),a("br"),a("span",{staticClass:"line-number"},[s._v("184")]),a("br"),a("span",{staticClass:"line-number"},[s._v("185")]),a("br"),a("span",{staticClass:"line-number"},[s._v("186")]),a("br"),a("span",{staticClass:"line-number"},[s._v("187")]),a("br"),a("span",{staticClass:"line-number"},[s._v("188")]),a("br"),a("span",{staticClass:"line-number"},[s._v("189")]),a("br"),a("span",{staticClass:"line-number"},[s._v("190")]),a("br"),a("span",{staticClass:"line-number"},[s._v("191")]),a("br"),a("span",{staticClass:"line-number"},[s._v("192")]),a("br")])]),a("h3",{attrs:{id:"_2-整体逻辑图-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-整体逻辑图-2"}},[s._v("#")]),s._v(" 2. 整体逻辑图")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2020/png/1355506/1598362495092-aec70669-3e56-498e-bddd-80535a20b8c6.png#align=left&display=inline&height=979&margin=%5Bobject%20Object%5D&name=vue3.0domdiff.png&originHeight=979&originWidth=2555&size=187009&status=done&style=none&width=2555",alt:"vue3.0domdiff.png"}}),s._v("\n和vue2.x对比，Vue3.0没有采用双指针遍历的方式，而是单指针循环，先遍历头部节点，直到第一个不同节点；然后再尾部遍历，直到第一个不同的节点。然后做新旧节点是否遍历完成的判断，如果遍历完成则进行挂载或删除。以上情况都不是，则进行核心逻辑对比。Vue3.x中取消了头尾/尾头的比较，只要头尾遇到不同的节点，那么其中的节点都进入未知序列核心逻辑的比较。先看一下核心对比的逻辑图\n此处的 unknown sequence 就是上例中的除去头尾相同项的中间项\n"),a("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2020/png/1355506/1598415762766-3052a521-2758-40ba-8be1-eba02ba0643d.png#align=left&display=inline&height=1047&margin=%5Bobject%20Object%5D&name=Vue3%20dom%20diff%20%20unknown%20sequence.png&originHeight=1047&originWidth=2767&size=325771&status=done&style=none&width=2767",alt:"Vue3 dom diff  unknown sequence.png"}})]),s._v(" "),a("h3",{attrs:{id:"_3-案例分析-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-案例分析-2"}},[s._v("#")]),s._v(" 3. 案例分析")]),s._v(" "),a("p",[s._v("还是上面的案例")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[s._v("realDom\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//old VNode")]),s._v("\ns1                           e1\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//new VNode")]),s._v("\ns2                            e2\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("头尾比较后，主要是中间项的比较。\noldch:： "),a("code",[s._v("[2, 3, 4, 5, 6, 7, 8, 9]")]),s._v(" \nnewch："),a("code",[s._v("[9, 11, 7, 3, 4, 5, 6, 2]")]),s._v(" \n结合动图\n"),a("img",{attrs:{src:n(333),alt:"vue3-dom-diff"}})]),s._v(" "),a("ol",[a("li",[s._v("首先遍历新的子节点，生成一个新节点自身key和index的映射表： "),a("code",[s._v("keyToNewIndexMap")])])]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("遍历旧节点\n"),a("ol",[a("li",[s._v("通过旧节点的key，在中"),a("code",[s._v("keyToNewIndexMap")]),s._v("查询在新节点index")]),s._v(" "),a("li",[s._v("如果newIndex没有，则删除节点")]),s._v(" "),a("li",[s._v("如果有，就生成一个 {newIndex : oldIndex+1}映射表 : "),a("code",[s._v("newIndexToOldIndexMap")])])])])]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("通过 "),a("code",[s._v("newIndexToOldIndexMap")]),s._v(" 获取最长升序子序列的index集合， "),a("code",[s._v("increasingNewIndexSequence")])])]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[a("p",[s._v("newch :                             "),a("code",[s._v("[9, 11, 7, 3, 4, 5, 6, 2]")])]),s._v(" "),a("p",[s._v("newIndexToOldIndexMap:    "),a("code",[s._v("[9, 0, 7, 3, 4, 5, 6, 2]")]),s._v(" \nincreasingNewIndexSequence:                     "),a("code",[s._v("[3, 4, 5, 6]")])])])]),s._v(" "),a("ul",[a("li",[s._v("需要比较的项的数量为8，用toBePatched表示，以数组项指针的形式从后往前循环，同时遍历newch和newIndexToOldIndexMap")]),s._v(" "),a("li",[s._v("同时最长升序子序列也从后往前遍历，将其遍历的值和上面遍历的数组指针比较")]),s._v(" "),a("li",[s._v("newIndexToOldIndexMap指针在increasingNewIndexSequence项中没有的时候，对应的newch中的节点就需要移动；存在的话，则不需移动")]),s._v(" "),a("li",[s._v("newIndexToOldIndexMap中值为0的时候，对应的newch中的项就为新增节点")]),s._v(" "),a("li",[s._v("锚点为，指针移动到newCh节点的后面节点")])]),s._v(" "),a("p",[s._v("Vue3.x的dom diff通过和最长升序子序列的的对比，将节点移动操作最小化，大大提升了效率。感兴趣的可以研究下"),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Longest_increasing_subsequence",target:"_blank",rel:"noopener noreferrer"}},[s._v("最长升序子序列"),a("OutboundLink")],1),s._v("。")]),s._v(" "),a("h3",{attrs:{id:"_4-最长升序子序列算法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-最长升序子序列算法"}},[s._v("#")]),s._v(" 4.最长升序子序列算法")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSequence")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("arr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" p "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("slice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" j"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" u"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" v"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" len "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" len"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" arrI "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            j "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("j"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" arrI"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" j"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("continue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            u "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            v "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("u "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" v"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                c "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("u "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" v"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" arrI"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    u "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" c "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    v "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("arrI "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("u"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("u "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("u "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("u"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    u "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    v "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("u "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("u"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("u"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" v"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        v "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("v"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);